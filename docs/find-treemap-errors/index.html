<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-lab1-error-analysis/error-analysis-tree" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Find model errors | Responsible AI Training</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ruyakubu.github.io/rai-dashboard-workshop/img/responsible-ai-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ruyakubu.github.io/rai-dashboard-workshop/img/responsible-ai-card.jpg"><meta data-rh="true" property="og:url" content="https://ruyakubu.github.io/rai-dashboard-workshop/docs/find-treemap-errors"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Find model errors | Responsible AI Training"><meta data-rh="true" name="description" content="We rely on traditional model performance to give us the overall &quot;accuracy&quot; of a model.  However,  we fail to realize that there are areas in the data where the model performs very poorly.  The Error Analysis section of the RAI dashboard helps provide an error distribution of the feature groups contributing to the error rate of the model.  Errors are often not distributed evenly across different data subgroups and Error Analysis helps you identify features with the highest error rates."><meta data-rh="true" property="og:description" content="We rely on traditional model performance to give us the overall &quot;accuracy&quot; of a model.  However,  we fail to realize that there are areas in the data where the model performs very poorly.  The Error Analysis section of the RAI dashboard helps provide an error distribution of the feature groups contributing to the error rate of the model.  Errors are often not distributed evenly across different data subgroups and Error Analysis helps you identify features with the highest error rates."><link data-rh="true" rel="icon" href="/rai-dashboard-workshop/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/find-treemap-errors"><link data-rh="true" rel="alternate" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/find-treemap-errors" hreflang="en"><link data-rh="true" rel="alternate" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/find-treemap-errors" hreflang="x-default"><link rel="stylesheet" href="/rai-dashboard-workshop/assets/css/styles.26dedbcd.css">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/runtime~main.b5fe3b5a.js" as="script">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/main.0a770cd8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rai-dashboard-workshop/"><div class="navbar__logo"><img src="/rai-dashboard-workshop/img/logo.png" alt="RAI Dashboard Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/rai-dashboard-workshop/img/logo.png" alt="RAI Dashboard Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Responsible AI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/welcome">1. Dashboard</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ruyakubu/rai-dashboard-workshop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/welcome">1. Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/azure-prerequistes">2. Prerequisites</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rai-dashboard-workshop/docs/find-treemap-errors">3. Lab 1️⃣ -  Error Analysis</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rai-dashboard-workshop/docs/find-treemap-errors">Find model errors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/analyze-dataset-cohort">4. Lab 2️⃣ - Model Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/data-analysis-chart-view">5. Lab 3️⃣ -  Data Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/view-feature-importance">6. Lab 4️⃣ - Feature Importance</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/stop-compute">7. Shutdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/references">8. References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/survey">9. Survey</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rai-dashboard-workshop/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">3. Lab 1️⃣ -  Error Analysis</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Find model errors</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Find model errors</h1><p>We rely on traditional model performance to give us the overall &quot;accuracy&quot; of a model.  However,  we fail to realize that there are areas in the data where the model performs very poorly.  The Error Analysis section of the RAI dashboard helps provide an error distribution of the feature groups contributing to the error rate of the model.  Errors are often not distributed evenly across different data subgroups and Error Analysis helps you identify features with the highest error rates. </p><p>In this lab, we are going to explore how to use Error Analysis to find errors in the trained model to identify where the errors are. In addition, we’ll learn how to create cohorts of data to investigate why a model is performing poorly in some cohorts and not in others.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="identify-and-create-a-cohort-for-the-tree-path-with-the-highest-errors">Identify and create a cohort for the tree path with the highest errors<a href="#identify-and-create-a-cohort-for-the-tree-path-with-the-highest-errors" class="hash-link" aria-label="Direct link to Identify and create a cohort for the tree path with the highest errors" title="Direct link to Identify and create a cohort for the tree path with the highest errors">​</a></h2><p>To start the analysis, you can observe that the root node shows that out of 994 total test data, 168 incorrect predictions were found while evaluating the model. </p><ol><li><p>When trying to find error affecting the model&#x27;s performance, the first thing to do is find the tree path with the highest number of errors. The shade of red shows what percentage of this node’s datapoints are receiving erroneous predictions. The darker the red the higher the error rate.  In our case the tree path with the darkest red color has a leaf-node <em>num_medications ≤ 21.50</em> on the bottom right-hand side of the tree.</p></li><li><p>To select the path leading up to the node, double-click on the leaf node. This highlights the path and displays the feature condition for each node in the path.</p></li><li><p>Create a cohort out of the selected path by clicking on the “Save as a new cohort” button on the upper right-hand side of the Error Analysis section.</p></li></ol><p><img loading="lazy" alt="create highest error cohort" src="/rai-dashboard-workshop/assets/images/1-select-error-tree-2b5bcbf3de01dab87b98328aa045bca8.png" title="Highest error rate" width="800" height="307" class="img_ev3q"></p><p><strong>Note</strong>: The dashboard displays the “Filters” in this selection: num_medications &lt;= 21.50, num_medications &gt; 11.50, prior_inpatient &gt; 0.00. </p><ol start="4"><li>Name the cohort: <strong><em>Err: Prior_Inpatient &gt;0; Num_meds &gt;11.50 &amp; &lt;= 21.50</em></strong></li></ol><p><img loading="lazy" alt="save highest error cohort" src="/rai-dashboard-workshop/assets/images/1-save-error-tree-e3395da1fd9eb88553093a9cdcc728a3.png" title="Save Highest error rate" width="800" height="413" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="identify-and-create-a-cohort-for-the-tree-path-with-the-least-errors">Identify and create a cohort for the tree path with the least errors<a href="#identify-and-create-a-cohort-for-the-tree-path-with-the-least-errors" class="hash-link" aria-label="Direct link to Identify and create a cohort for the tree path with the least errors" title="Direct link to Identify and create a cohort for the tree path with the least errors">​</a></h2><p>For contrast purposes, create another cohort with the tree path with the least number of errors to see if we can gain insights as to why the model perform well in one cohort vs another. The leaf node with the feature condition <em>num_lab_procedures ≤ 56.50</em>, on the far left-hand side of the tree, is the path of the tree with the least errors.</p><p><img loading="lazy" alt="create least error cohort" src="/rai-dashboard-workshop/assets/images/1-select-least-error-tree-81ddabc0dd71ad1dce86ee04648b8af3.png" title="Least error rate" width="800" height="346" class="img_ev3q"></p><ol><li>Double-click on the node and save the selected path in a cohort.
The &quot;Filter&quot; in this dataset is: num_lab_procedures &lt;= 56.50, number_diagnoses &lt;= 6.50, prior_inpatient &lt;= 0.00.</li><li>Name the cohort: <strong><em>Prior_Inpatient = 0; num_diagnoses &lt;= 6.50; lab_procedures &lt;= 56.50</em></strong></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-feature-list-to-identify-the-top-feature-contributing-to-model-errors">Use the Feature List to identify the top feature contributing to model errors<a href="#use-the-feature-list-to-identify-the-top-feature-contributing-to-model-errors" class="hash-link" aria-label="Direct link to Use the Feature List to identify the top feature contributing to model errors" title="Direct link to Use the Feature List to identify the top feature contributing to model errors">​</a></h2><p>One of the advantages of using RAI dashboard to debug a model is that it provides the &quot;Feature List&quot; pane, which is a list of features in the test dataset that are error contributors. The list is sorted based on contribution of the features to the errors. The higher a feature is on this list, the higher its contribution importance to your model errors.</p><p><img loading="lazy" alt="view Feature List" src="/rai-dashboard-workshop/assets/images/1-view-feature-list-e0ee157bdc463f6ad318347820313424.png" title="Feature List" width="800" height="373" class="img_ev3q"></p><p>In our Diabetes Hospital Readmission model, the &quot;Feature List&quot; indicates the following features to be among the top contributors of the model&#x27;s errors:</p><ul><li>Age</li><li>num_medications</li><li>medicare</li><li>time_in_hospital</li><li>num_procedures</li><li>insulin</li><li>discharge_destination</li></ul><p>Congratulations, you completed your first lab!</p><hr><p>DISCLAIMER:  Microsoft products and services (1) are not designed, intended or made available as a medical device, and (2) are not designed or intended to be a substitute for professional medical advice, diagnosis, treatment, or judgment and should not be used to replace or as a substitute for professional medical advice, diagnosis, treatment, or judgment. Customers/partners are responsible for ensuring their solutions comply with applicable laws and regulations. Customers/partners also will need to thoroughly test and evaluate whether an AI tool is fit for purpose and identify and mitigate any risks or harms to end users associated with its use.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rai-dashboard-workshop/docs/opensource-prerequistes"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2.2 Open-Source RAI dashboard</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rai-dashboard-workshop/docs/analyze-dataset-cohort"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Analyze dataset cohort</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#identify-and-create-a-cohort-for-the-tree-path-with-the-highest-errors" class="table-of-contents__link toc-highlight">Identify and create a cohort for the tree path with the highest errors</a></li><li><a href="#identify-and-create-a-cohort-for-the-tree-path-with-the-least-errors" class="table-of-contents__link toc-highlight">Identify and create a cohort for the tree path with the least errors</a></li><li><a href="#use-the-feature-list-to-identify-the-top-feature-contributing-to-model-errors" class="table-of-contents__link toc-highlight">Use the Feature List to identify the top feature contributing to model errors</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/rai-dashboard-workshop/docs/welcome">Training</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/ai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AI Hub</a><span class="footer__link-separator">·</span><a href="https://twitter.com/azureadvocates" target="_blank" rel="noopener noreferrer" class="footer__link-item">@AzureAdvocates</a><span class="footer__link-separator">·</span><a href="https://privacy.microsoft.com/privacystatement" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Statement </a><span class="footer__link-separator">·</span><a href="https://microsoft.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">© 2023 Microsoft</a></div></div></div></footer></div>
<script src="/rai-dashboard-workshop/assets/js/runtime~main.b5fe3b5a.js"></script>
<script src="/rai-dashboard-workshop/assets/js/main.0a770cd8.js"></script>
</body>
</html>