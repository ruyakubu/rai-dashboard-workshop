<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-azure-prompt-flow/lab5-chatbot-with-your-data/pf-chatbot-with-your-data-lab5'" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Lab# 5: Chatbot to use your data | Responsible AI Training</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ruyakubu.github.io/rai-dashboard-workshop/img/responsible-ai-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ruyakubu.github.io/rai-dashboard-workshop/img/responsible-ai-card.jpg"><meta data-rh="true" property="og:url" content="https://ruyakubu.github.io/rai-dashboard-workshop/docs/chatbot-with-your-data"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab# 5: Chatbot to use your data | Responsible AI Training"><meta data-rh="true" name="description" content="In the precise exercise you create a vector index and train to search for your vector embeddings.  In the exercise, you’ll be expanding the Chat pipeline logic to take the user question and convert to numeric embeddings.  Then we’ll use the numeric embedding to search the numeric vector.  Next, we’ll use the prompt to set rules with restrictions and how to display the data to the user."><meta data-rh="true" property="og:description" content="In the precise exercise you create a vector index and train to search for your vector embeddings.  In the exercise, you’ll be expanding the Chat pipeline logic to take the user question and convert to numeric embeddings.  Then we’ll use the numeric embedding to search the numeric vector.  Next, we’ll use the prompt to set rules with restrictions and how to display the data to the user."><link data-rh="true" rel="icon" href="/rai-dashboard-workshop/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/chatbot-with-your-data"><link data-rh="true" rel="alternate" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/chatbot-with-your-data" hreflang="en"><link data-rh="true" rel="alternate" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/chatbot-with-your-data" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rai-dashboard-workshop/blog/rss.xml" title="Responsible AI Training RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rai-dashboard-workshop/blog/atom.xml" title="Responsible AI Training Atom Feed"><link rel="stylesheet" href="/rai-dashboard-workshop/assets/css/styles.4f96b524.css">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/runtime~main.fc713e2e.js" as="script">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/main.76c51761.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rai-dashboard-workshop/"><div class="navbar__logo"><img src="/rai-dashboard-workshop/img/logo.png" alt="RAI Dashboard Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/rai-dashboard-workshop/img/logo.png" alt="RAI Dashboard Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Responsible AI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/welcome">1. Dashboard</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/content-safety-overview">2. Content Safety</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/prompt-flow-overview">3. Prompt Flow</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ruyakubu/rai-dashboard-workshop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/welcome">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/rai-dashboard-ms-learn">Responsible AI dashboard</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/content-safety-overview">Azure Content Safety</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rai-dashboard-workshop/docs/prompt-flow-overview">Azure Prompt Flow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/prompt-flow-overview">Prompt Flow Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/build-workshop-enviroment">Lab 1️ - Build workshop environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/rai-dashboard-workshop/docs/access-connection-keys">Lab 2️ - Access Connection data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/rai-dashboard-workshop/docs/run-chatbot-template">Lab 3️ -  Run chatbot template</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/bring-your-data">Lab 4️ - Bring your data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rai-dashboard-workshop/docs/chatbot-with-your-data">Lab 5 - Chatbot with your data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/run-custom-chatbot">Lab 6 - Run custom chatbot</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/rai-dashboard-workshop/docs/evaluate-chatbot">Lab 7 - Evaluate Chatbot</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/stop-compute">7. Shutdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/references">8. References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/survey">9. Survey</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rai-dashboard-workshop/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Azure Prompt Flow</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 5 - Chatbot with your data</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><header><h1>Lab# 5: Chatbot to use your data</h1></header><p>In the precise exercise you create a vector index and train to search for your vector embeddings.  In the exercise, you’ll be expanding the Chat pipeline logic to take the user question and convert to numeric embeddings.  Then we’ll use the numeric embedding to search the numeric vector.  Next, we’ll use the prompt to set rules with restrictions and how to display the data to the user.</p><p>We&#x27;ll be using the following tools:</p><ul><li><strong>Embedding</strong>: converts text to number tokens.  Store to token in vector arrays based on then relation to each other.</li><li><strong>Vector index lookup</strong>: Takes user input question and queries the vector index with the closest answers to the question.</li><li><strong>Prompt</strong>: enters user to add rules on the response show be sent to user</li><li><strong>LLM</strong>: provides the LLM prompt or LLM model response to user</li></ul><ol><li>Open Prompt Flow service for Visual Studio code, by clicking the icon.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/promptflow-icon-5bc755d099b85202709ae9aabb71b857.png" width="847" height="287" class="img_ev3q"></p><ol start="2"><li>On the <strong>TOOLS</strong> toolbar, select the <strong>Embedding</strong> tool by clicking on plus icon <strong>+</strong>.  </li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/flow-tools-480fe56a56c497cfde43713c215a0380.png" width="358" height="427" class="img_ev3q"></p><ol start="3"><li>Enter <strong>Name</strong> for the node (e.g. embed_question) in the pop-up entry on top of the page. Then press <strong>Enter</strong>.  This will generate a new Embedding section at the bottom of the flow.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/add-embedding-node-0efbf0e16d5b7aecbd917dbb955d6616.png" width="945" height="406" class="img_ev3q"></p><ol start="4"><li>Select the <strong>AzureOpenAIconnection</strong> name you created earlier.</li><li>Select <strong>Text-embedding-ada-002</strong> deployment name you created earlier</li><li>For <strong>Input</strong>, select <em>${inputs.question}</em>.  This should create a node under the input node.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/embed-section-501e2e6ad73e06ca25adc198f0938cd5.png" width="1255" height="422" class="img_ev3q"></p><ul><li>Vector Index Lookup*</li></ul><ol><li>On the <strong>TOOLS</strong> toolbar, select the <strong>Vector Index Lookup</strong> tool by clicking on plus icon <strong>+</strong>.  </li><li>Enter <strong>Name</strong> for the node (e.g. search_vector_index).  This will generate a new <strong>Vector Index Lookup</strong> section at the bottom of the flow.</li><li>For <strong>Path</strong>, copy and paste the Datastore URI you retrieve earlier for the vector index.</li><li>Select the embedding output as the <strong>query</strong> field (e.g. <em>${embed_question.output}</em>).</li><li>Leave default value for <strong>top_k</strong>.</li></ol><p><strong>NOTE</strong>: Feel free move the nodes around to make it easier to view the flow.</p><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/search-vector-88b150e9f60372e4d3085f7752d00b11.png" width="1280" height="327" class="img_ev3q"></p><p><em>Construct Prompt</em></p><ol><li>On the <strong>TOOLS</strong> toolbar, select the <strong>Prompt</strong> tool by clicking on plus icon <strong>+</strong>.  This will generate a new Prompt section at the bottom of the flow.</li><li>Enter a <strong>Name</strong> for the node (e.g. generate_prompt).  This will generate a new Prompt section at the bottom of the flow.</li><li>Click on the <strong>.jinja2</strong> link to open the prompt editor.  This will open a new tab in the editor.</li><li>Delete all the text in the file.  Then, copy the following text in the Prompt textbox:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">system:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">You are an AI system designed to answer questions. When presented with a scenario, you must reply with accuracy to inquirers</span><span class="token string" style="color:#e3116c">&#x27; inquiries.  If there is ever a situation where you are unsure of the potential answers, simply respond with &quot;I don&#x27;</span><span class="token plain">t know.  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">context: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">contexts</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">item</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> chat_history %</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">item.inputs.question</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assistant:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">item.outputs.answer</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">% endfor %</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">question</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/construct-prompt-2291b048c217c92e7eb6f6e70ba458fc.png" width="1284" height="380" class="img_ev3q"></p><ol start="5"><li>Close the .jinja2 prompt editor tab.  Then return to the flow.dag.yaml tab.</li><li>In your prompt section of the flow, you would see the prompt flow automatically generated the input fields from the placeholder fields in your .jinja2 file.</li><li>Select ${inputs.question} for the <strong>question</strong> field.</li><li>For <strong>contexts</strong>, select ${Search_Vector_Index.output}.</li><li>Select the ${inputs.chat_history} for <strong>chat_history</strong></li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/prompt-inputs-81c8855deaaa1bac67e7889b32600803.png" width="1375" height="399" class="img_ev3q"></p><p><em>chat</em></p><ol><li>Click on the <strong>chat</strong> node and drag it below the <strong>generate_prompt</strong> node.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/chat-node-a559006b1f5cfc83dbb2123788e5a588.png" width="350" height="424" class="img_ev3q"></p><ol start="2"><li>Click on the <strong>chat</strong> to scroll up to the <em>chat</em> section.</li><li>Click on the <strong>.jinja2</strong> link for the chat to open the prompt editor.  This will open a new tab in the editor.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/chat-jinja2-e12c302331fc29bfd646c7b0eb1c54e0.png" width="669" height="347" class="img_ev3q"></p><ol start="4"><li>Delete all the text in the file.  Then, copy and paste the following text in the Prompt textbox.  This specifies the output to display to the user:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">prompt_response</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>Close the <strong>.jinja2</strong> prompt editor tab.  Then return to the <strong>flow.dag.yaml</strong> tab.</li><li>In your chat section of the flow, you would see that prompt flow automatically generated a <strong>prompt_response</strong> input fields from the placeholder fields in your .jinja2 file.</li><li>In the <em>prompt_response</em> value, select ${generate_prompt.output}.</li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rai-dashboard-workshop/docs/bring-your-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab# 4: bring your own data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rai-dashboard-workshop/docs/run-custom-chatbot"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab# 6: Run custom chatbot</div></a></nav></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/rai-dashboard-workshop/docs/welcome">Training</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/ai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AI Hub</a><span class="footer__link-separator">·</span><a href="https://twitter.com/azureadvocates" target="_blank" rel="noopener noreferrer" class="footer__link-item">@AzureAdvocates</a><span class="footer__link-separator">·</span><a href="https://privacy.microsoft.com/privacystatement" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Statement </a><span class="footer__link-separator">·</span><a href="https://microsoft.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">© 2023 Microsoft</a></div></div></div></footer></div>
<script src="/rai-dashboard-workshop/assets/js/runtime~main.fc713e2e.js"></script>
<script src="/rai-dashboard-workshop/assets/js/main.76c51761.js"></script>
</body>
</html>