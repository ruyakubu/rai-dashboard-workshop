<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rai-dashboard-workshop/blog/rss.xml" title="Azure Responsible AI dashboard workshop Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rai-dashboard-workshop/blog/atom.xml" title="Azure Responsible AI dashboard workshop Blog Atom Feed"><title data-react-helmet="true">Analyze dataset cohort | Azure Responsible AI dashboard workshop</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://github.com/rai-dashboard-workshop/docs/analyze-dataset-cohort"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Analyze dataset cohort | Azure Responsible AI dashboard workshop"><meta data-react-helmet="true" name="description" content="Part of evaluating the performance of a machine learning model is getting a wholistic understanding of its behavior.  This sometimes involves doing comparative analysis helps shed light on how the model is performing with one subgroup of the dataset vs another.   In some case feature-based analysis is necessary to isolate the data and pinpoint the root cause of some of the errors."><meta data-react-helmet="true" property="og:description" content="Part of evaluating the performance of a machine learning model is getting a wholistic understanding of its behavior.  This sometimes involves doing comparative analysis helps shed light on how the model is performing with one subgroup of the dataset vs another.   In some case feature-based analysis is necessary to isolate the data and pinpoint the root cause of some of the errors."><link data-react-helmet="true" rel="shortcut icon" href="/rai-dashboard-workshop/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/rai-dashboard-workshop/docs/analyze-dataset-cohort"><link data-react-helmet="true" rel="alternate" href="https://github.com/rai-dashboard-workshop/docs/analyze-dataset-cohort" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/rai-dashboard-workshop/docs/analyze-dataset-cohort" hreflang="x-default"><link rel="stylesheet" href="/rai-dashboard-workshop/assets/css/styles.a39c77e9.css">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/runtime~main.ec941fef.js" as="script">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/main.90dbfbec.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rai-dashboard-workshop/"><img src="/rai-dashboard-workshop/img/page_logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/rai-dashboard-workshop/img/page_logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"></a><a class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/welcome">Azure Machine Learning:  Responsible AI dashboard workshop</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ruyakubu/RAI-Diabetes-Hospital-Readmission-classification" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/welcome">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/prerequistes">Prerequisites</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Lab# 1:  Error Analysis</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Lab# 2: Model Analysis</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rai-dashboard-workshop/docs/analyze-dataset-cohort">Analyze dataset cohort</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/analyze-feature-cohort">Analyze feature cohorts</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Lab# 3: Data Analysis</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Lab# 5: Feature Importance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/stop-compute">Shutdown</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Model Overview</h1></header><p>Part of evaluating the performance of a machine learning model is getting a wholistic understanding of its behavior.  This sometimes involves doing comparative analysis helps shed light on how the model is performing with one subgroup of the dataset vs another.   In some case feature-based analysis is necessary to isolate the data and pinpoint the root cause of some of the errors.</p><p>In this lab we will explore how to use the Model Overview section of the Azure Responsible AI (RAI) dashboard. We will use the cohorts created from the Error Analysis lab to investigate why the model‚Äôs behavior is better in one cohort vs another cohort.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="review-and-compare-model-performance-metric-table"></a>Review and compare model performance metric table<a class="hash-link" href="#review-and-compare-model-performance-metric-table" title="Direct link to heading">#</a></h2><p>In the previous lab, you used the Error Analysis tool of the RAI dashboard to discover cohorts where the model had the highest error rates as well as cohort with the lowest errors. Now, you are going to investigate why the model‚Äôs behavior is better in one cohort vs another cohort using the Model Overview.</p><p><img alt="dataset cohort metrics" src="/rai-dashboard-workshop/assets/images/4-dataset-cohort-metrics-1e773fe87d5c9317350131c17000b650.png" title="Dataset cohort metrics"></p><ol><li><p>Under Model Overview, select the ‚ÄúDataset Cohorts‚Äù pane. This displays the different cohorts created in a table with the model metrics.</p></li><li><p>Compare the cohort with the most errors <strong>‚ÄúErr: Prior_Inpatient &gt; 0; Num_Meds &gt; 11 and ‚â§ 21.50‚Äù</strong> verse the least errors <strong>‚ÄúPrior_inpatient = 0; num_diagnose ‚â§ 6.50; lab_procedures &lt; 56.50‚Äù</strong></p></li><li><p>Hover the mouse over the box plot line on the chart to see the measurement details.</p></li><li><p>Observe that the accuracy score for the erroneous cohort is 0.66, which is bad. The False Positive rate is very low; meaning the model is not performing well predicting patients that are going to be Readmitted back to the hospital in 30 days. </p><p>Contrarily, the False Negative rate of 0.754 is high. Meaning, a majority of patients that the model is predicting has a high rate of predicting patients that will not be readmitted as readmitted in 30 days back to the hospital.</p></li><li><p>Next, look at the metrics for the cohort with the least errors has an accuracy score of 0.94, which is far better than the overall accuracy score of the model with all the data. However, this cohort also has a low  False positive rate at 0.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="examine-the-probability-distribution-chart"></a>Examine the Probability distribution chart<a class="hash-link" href="#examine-the-probability-distribution-chart" title="Direct link to heading">#</a></h2><p>The Probability distribution chart shows the model‚Äôs probability predicting if patients in the cohorts  will be Readmitted or Not readmitted back to the hospital within 30 days.</p><p><img alt="dataset cohort metrics" src="/rai-dashboard-workshop/assets/images/4-dataset-probability-distrib-4be2b042477bc75b595780c9e9cc5b98.png" title="Dataset cohort metrics"></p><ol><li>Compare the probability of the patients not being readmitted for all 3 cohorts.</li><li>You&#x27;ll see that the ‚ÄúAll data‚Äù cohort with all the patients test dataset, show that a majority of the patients will not be readmitted back in the hospital within 30 days, with a median probability of patients not readmitted at 0.854 and upper quartile at 0.986, which is good. We would not want a high frequency of patients being readmitted back to a hospital in a few days after being discharged.</li><li>Next, the cohort with the highest error rate:  <strong><em>Err: Prior_Inpatient &gt;0; Num_meds &gt;11.50 &amp; &lt;= 21.50</em></strong>, shows a slightly lower probability at 0.89 and a median of 0.719. </li><li>Lastly, the cohort with the least error rate: <em>Prior_Inpatient = 0</em>; <em>num_diagnoses &lt;= 6.50</em>; <em>lab_procedures &lt;= 56.50</em>,  show a probability of patients not readmitted has a median of 0.90 and upper quartile of 0.986. </li><li>To change the chart to show the probability of patients being Readmitted for the 3 cohorts, click on the &quot;Choose Label&quot; button on the x-axis.</li></ol><p><img alt="dataset y-axis readmitted" src="/rai-dashboard-workshop/assets/images/4-dataset-y-reamitted-a823200df09bf3d043e558f394308354.png" title="Dataset cohort Y-axis Readmitted"></p><ol start="6"><li>Select the &quot;Probability:  Readmitted&quot; radio button. On the pop-up window pane.</li><li>Then click on the <strong>&quot;Apply&quot;</strong> button.</li><li>Compare the probability of patients being Readmitted for the 3 cohorts</li></ol><p><img alt="dataset cohort metrics" src="/rai-dashboard-workshop/assets/images/4-dataset-probab-distrib-readmit-e2abdf4ddc1e093a7fdee4aab49609ea.png" title="Dataset cohort metrics"></p><ol start="9"><li>You see that the 3 cohort have a probability of being readmitted less than 0.55.  The cohort will the least number of model errors has the lowest probability of 0.179.  The cohort with the most errors has the highest probability at 0.543.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="review-the-metric-visualization-chart"></a>Review the Metric visualization chart<a class="hash-link" href="#review-the-metric-visualization-chart" title="Direct link to heading">#</a></h2><p>Now let&#x27;s get a deeper understanding of the model&#x27;s performance by switching to the Metric visualizations pane. Since you&#x27;ve already reviewed the accuracy score under the &quot;Dataset Cohort&quot; above, you&#x27;ll explore what the other metrics can reveal about the 3 cohorts.</p><ol><li><p>Click on the Metric visualizations tab.</p></li><li><p>To choose another metric, click on the &quot;Choose Label&quot; on the x-axis to choose &quot;Precision score&quot; from the list of other available metrics.  Then click on the <strong>&quot;Apply&quot;</strong> button.
<strong>Note</strong>:  Since the trained model is a classification problem, the RAI dashboard will display only classification metrics.</p></li></ol><p><img alt="dataset cohort precision metrics" src="/rai-dashboard-workshop/assets/images/4-select-dataset-precision-f0f74c79ec30fe5f2187cd3cdca84c0f.png" title="Dataset cohort precision metrics"></p><ol start="3"><li><p>From reviewing the chart, you will see that the model performance for all test data cohort and erroneous cohort is correct at ~70% of the time. The Precision score rate for the least erroneous cohort is 0.94 for patients with no prior hospitalization and the number of diagnoses is less than 7. This is consistent with the accuracy score.</p></li><li><p>Finally,  change the metric to &quot;Recall&quot; to see how well the model was able to correctly predict that the patients in the cohorts will be readmitted back in the hospital in 30 days. The recall shows that the model&#x27;s prediction was correct less than 25% of the time for all the cohorts for patients being readmitted. This reveals that the model&#x27;s predictions are not correct a majority of the time when trying to predict patients that will be readmitted within 30 days.</p></li></ol><p><img alt="dataset cohort recall metrics" src="/rai-dashboard-workshop/assets/images/4-dataset-recall-209fe281e67d24fa3a6b2968e66bce35.png" title="Dataset cohort recall metrics"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="look-at-the-confusion-matrix"></a>Look at the Confusion Matrix<a class="hash-link" href="#look-at-the-confusion-matrix" title="Direct link to heading">#</a></h2><p>The Confusion Matrix is helpful to check the rate of the model correctly making the right prediction. This will reveal how well the model is learning for cases where the patient is Readmitted back in the hospital within 30 days vs Not Readmitted.</p><ol><li>Click on the &quot;Confusion matrix&quot; tab.</li></ol><p><img alt="dataset confusion matrix" src="/rai-dashboard-workshop/assets/images/4-dataset-confusion-matrix-80fb705028052a6a62a4226f9352d123.png" title="Dataset confusion matrix"></p><ol start="2"><li>You will observe that the model is performing better with patient that are &quot;Not Readmitted&quot; compare to &quot;Readmitted&quot;.  The number of False Negative should be less that True Negative.  This mean out of all the patient data, the model was only able to predict 24 patients correctly to be Readmitted back to the hospital in &lt; 30 days.</li></ol><ul><li>The number of True Positive (TP) is:  802</li><li>The number of False Negative (FN) is: 159</li><li>The number of False Positive (FP) is: 9</li><li>The number of True Negative (TN) is: 24</li></ul><hr><p>DISCLAIMER:  Microsoft products and services (1) are not designed, intended or made available as a medical device, and (2) are not designed or intended to be a substitute for professional medical advice, diagnosis, treatment, or judgment and should not be used to replace or as a substitute for professional medical advice, diagnosis, treatment, or judgment. Customers/partners are responsible for ensuring their solutions comply with applicable laws and regulations. Customers/partners also will need to thoroughly test and evaluate whether an AI tool is fit for purpose and identify and mitigate any risks or harms to end users associated with its use.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/lab2-model-overview/analyze-dataset-cohort.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rai-dashboard-workshop/docs/manage-cohorts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ View and manage cohort list</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rai-dashboard-workshop/docs/analyze-feature-cohort"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Analyze feature cohorts ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#review-and-compare-model-performance-metric-table" class="table-of-contents__link">Review and compare model performance metric table</a></li><li><a href="#examine-the-probability-distribution-chart" class="table-of-contents__link">Examine the Probability distribution chart</a></li><li><a href="#review-the-metric-visualization-chart" class="table-of-contents__link">Review the Metric visualization chart</a></li><li><a href="#look-at-the-confusion-matrix" class="table-of-contents__link">Look at the Confusion Matrix</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rai-dashboard-workshop/docs/welcome">Lab</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/azureadvocates" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/ruyakubu/RAI-Diabetes-Hospital-Readmission-classification" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/rai-dashboard-workshop/assets/js/runtime~main.ec941fef.js"></script>
<script src="/rai-dashboard-workshop/assets/js/main.90dbfbec.js"></script>
</body>
</html>