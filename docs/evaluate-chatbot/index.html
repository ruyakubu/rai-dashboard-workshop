<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-azure-prompt-flow/lab7-evaluate chatbot/pf-evaluate-chatbot-lab7'" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Lab# 7: Evaluate chatbot | Responsible AI Training</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ruyakubu.github.io/rai-dashboard-workshop/img/responsible-ai-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ruyakubu.github.io/rai-dashboard-workshop/img/responsible-ai-card.jpg"><meta data-rh="true" property="og:url" content="https://ruyakubu.github.io/rai-dashboard-workshop/docs/evaluate-chatbot"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab# 7: Evaluate chatbot | Responsible AI Training"><meta data-rh="true" name="description" content="You can unit test your Flow.  However, Prompt flow provides a gallery of sample evaluation flows your can use to test you Flow in bulk. For example, classification accuracy, QnA Groundedness, QnA Relevant, QnA Similarity, QnA F1 Score etc.  This enables you to test how well your LLM is performing.  In addition, you have the ability to examine which of your variant prompts are performing better.  In this example, we’ll use the QnA RAG Evaluation template to test our flow."><meta data-rh="true" property="og:description" content="You can unit test your Flow.  However, Prompt flow provides a gallery of sample evaluation flows your can use to test you Flow in bulk. For example, classification accuracy, QnA Groundedness, QnA Relevant, QnA Similarity, QnA F1 Score etc.  This enables you to test how well your LLM is performing.  In addition, you have the ability to examine which of your variant prompts are performing better.  In this example, we’ll use the QnA RAG Evaluation template to test our flow."><link data-rh="true" rel="icon" href="/rai-dashboard-workshop/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/evaluate-chatbot"><link data-rh="true" rel="alternate" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/evaluate-chatbot" hreflang="en"><link data-rh="true" rel="alternate" href="https://ruyakubu.github.io/rai-dashboard-workshop/docs/evaluate-chatbot" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rai-dashboard-workshop/blog/rss.xml" title="Responsible AI Training RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rai-dashboard-workshop/blog/atom.xml" title="Responsible AI Training Atom Feed"><link rel="stylesheet" href="/rai-dashboard-workshop/assets/css/styles.4f96b524.css">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/runtime~main.58485783.js" as="script">
<link rel="preload" href="/rai-dashboard-workshop/assets/js/main.fac05ae2.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rai-dashboard-workshop/"><div class="navbar__logo"><img src="/rai-dashboard-workshop/img/logo.png" alt="RAI Dashboard Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/rai-dashboard-workshop/img/logo.png" alt="RAI Dashboard Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Responsible AI</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/welcome">1. Dashboard</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/content-safety-overview">2. Content Safety</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rai-dashboard-workshop/docs/prompt-flow-overview">3. Prompt Flow</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ruyakubu/rai-dashboard-workshop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/welcome">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/rai-dashboard-ms-learn">Responsible AI dashboard</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rai-dashboard-workshop/docs/content-safety-overview">Azure Content Safety</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rai-dashboard-workshop/docs/prompt-flow-overview">Azure Prompt Flow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/prompt-flow-overview">Prompt Flow Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/build-workshop-enviroment">Lab 1️ - Build workshop environment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/rai-dashboard-workshop/docs/access-connection-keys">Lab 2️ - Access Connection data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/rai-dashboard-workshop/docs/run-chatbot-template">Lab 3️ -  Run chatbot template</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/bring-your-data">Lab 4️ - Bring your data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/chatbot-with-your-data">Lab 5 - Chatbot with your data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rai-dashboard-workshop/docs/run-custom-chatbot">Lab 6 - Run custom chatbot</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/rai-dashboard-workshop/docs/evaluate-chatbot">Lab 7 - Evaluate Chatbot</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rai-dashboard-workshop/docs/evaluate-chatbot">Lab# 7: Evaluate chatbot</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/stop-compute">7. Shutdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/references">8. References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/rai-dashboard-workshop/docs/survey">9. Survey</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/rai-dashboard-workshop/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Azure Prompt Flow</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Lab 7 - Evaluate Chatbot</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab# 7: Evaluate chatbot</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Lab# 7: Evaluate chatbot</h1></header><p>You can unit test your Flow.  However, Prompt flow provides a gallery of sample evaluation flows your can use to test you Flow in bulk. For example, classification accuracy, QnA Groundedness, QnA Relevant, QnA Similarity, QnA F1 Score etc.  This enables you to test how well your LLM is performing.  In addition, you have the ability to examine which of your variant prompts are performing better.  In this example, we’ll use the <strong>QnA RAG Evaluation</strong> template to test our flow.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="import-chatbot-flow-from-local-to-cloud">import chatbot flow from local to cloud<a href="#import-chatbot-flow-from-local-to-cloud" class="hash-link" aria-label="Direct link to import chatbot flow from local to cloud" title="Direct link to import chatbot flow from local to cloud">​</a></h2><ol><li>Open Azure Machine Learning Studio (<a href="https://ml.azure.com/" target="_blank" rel="noopener noreferrer">https://ml.azure.com/</a>). The click on the <strong>Prompt flow</strong> navigation option on the left-hand side of the screen.  </li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/pf-prompt-flow-menu-ec2010170d2dcb37ea6031580d63c8f1.png" width="1531" height="499" class="img_ev3q"></p><ol start="2"><li>Click <strong>+ Create</strong> button.</li><li>Scroll down the pane and to the <strong>Import</strong> section.  Then click on the <strong>Upload</strong> button the <strong>Upload from local</strong> .</li><li>On the <strong>Upload from local</strong> pane, click on the <strong>Browse</strong> button and select the <strong>master</strong> folder from the workshop repo directory.</li><li>Enter <strong>Folder Name</strong>  pane (e.g. dental_chatbot).</li><li>Select <strong>Chat</strong> from the <strong>Select flow type</strong>.</li><li>Click on the <strong>upload</strong> button. The flow will be open in your Azure Machine Learning studio.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-connection-to-azureopenai">Create connection to AzureOpenAI<a href="#create-connection-to-azureopenai" class="hash-link" aria-label="Direct link to Create connection to AzureOpenAI" title="Direct link to Create connection to AzureOpenAI">​</a></h2><ol><li>Click on the <strong>Prompt flow</strong> navigation option</li><li>Click on the <strong>Connections</strong> tab on the Prompt Flow page</li><li>Click on the <strong>Create</strong> button, then select <strong>Azure OpenAI</strong> option in the drop-down menu</li><li>Enter a <strong>Name</strong> </li><li>The Azure OpenAI option should be selected for <strong>Provider</strong>.</li><li>Select your subscription under <strong>Subscription id</strong>.</li><li>Select your OpenAI instance name under <strong>Azure OpenAI Account Names</strong> drop-down menu.</li><li>Paste the Key 1 value for Azure OpenAI you copied earlier in the <strong>API key</strong> textbox.</li><li>Paste the Language API URL you copied earlier in the <strong>API base</strong> textbox.</li><li>The <strong>API type</strong> should be set to the default value (e.g. azure)</li><li>The <strong>API version</strong> should be set to the default value (e.g. 2023-07-01-preview)</li><li> Click <strong>Save</strong></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-azureopenai-connection-to-chatbot-flow">Add AzureOpenAI connection to chatbot flow<a href="#add-azureopenai-connection-to-chatbot-flow" class="hash-link" aria-label="Direct link to Add AzureOpenAI connection to chatbot flow" title="Direct link to Add AzureOpenAI connection to chatbot flow">​</a></h2><ol><li>Click on the <strong>Flows</strong> tab on the Prompt Flow page.</li><li>Select the <strong>Flow name</strong> you created earlier (e.g. dental_chatbot).</li><li>On the <strong>embed_question</strong> node, click on the <strong>connection</strong> textbox and select your AzureOpenAI connection name.</li><li>On the <strong>prompt_answer</strong> node, click on the <strong>connection</strong> drop-down menu and select your AzureOpenAI connection name.  Then select yoar AzureOpenAI <strong>deployment_name</strong>.</li><li>In the <strong>Output</strong> section, click on the <strong>Add output</strong>. Then enter <strong>context</strong> for the <strong>Name</strong> and <em>${search_vector_index.output}</em> for the <strong>value</strong>.</li><li>Click on <strong>Save</strong> button on the top right-hand side of the screen.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="evaluate-chatbot-flow">Evaluate chatbot flow<a href="#evaluate-chatbot-flow" class="hash-link" aria-label="Direct link to Evaluate chatbot flow" title="Direct link to Evaluate chatbot flow">​</a></h2><p>1..Click on the <strong>Evaluate</strong> button on the top right-side of the screen.</p><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/evaluate-aede03a9caf52891e4663a930f336b76.png" width="975" height="101" class="img_ev3q"></p><ol start="2"><li>On the <strong>Batch run &amp; Evaluate</strong> page, select the <strong>Next</strong> button</li><li>On the Batch run settings page, click on <strong>Add new data</strong> link for the <strong>Data</strong> field.  </li><li>Enter <strong>Name</strong> on the Add new data pane (e.g. Contoso-Dental). Then <strong>Browse</strong> to the workshop repo directory and select the <strong>contoso-dental.csv</strong> file from the <em>/data</em> folder.   </li><li>Click on the <strong>Add</strong> button.   A preview of the top 5 rows of the data should be displayed at the bottom of the page.</li><li>Under Input mapping, enter the open and close brackets <strong>[]</strong> for the value of <strong>chat_history</strong>.</li><li>Click in the Value textbox for the <strong>question</strong> field and enter <em>${data.question}</em>.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/evaluate-input-flow-1308009d35933c4050b93212a44d7446.png" width="975" height="523" class="img_ev3q"></p><ol start="10"><li>Click the <strong>Next</strong> button.</li><li>On the <strong>Select evaluation</strong> page, select the checkbox for the <strong>QnA RAG Evaluation</strong>.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/evaluation-gallery-0f7ded3f4413d56306bd078147000e21.png" width="1475" height="807" class="img_ev3q"></p><ol start="12"><li>Click the <strong>Next</strong> button.</li><li>Click on the right arrow <strong>“&gt;”</strong> to expand the <strong>QnA RAG Evaluation</strong> settings.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/evaluate-qna-fields-cb1170858c26305ea944cc434a6f9625.png" width="975" height="456" class="img_ev3q"></p><ol start="14"><li>Select the dataset your uploaded earlier for the <strong>Choose data asset for evaluation</strong> field.</li><li>For the <strong>metric</strong> field, cope and paste the following text:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gpt_groundedness,gpt_retrieval_score,gpt_relevance  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="16"><li>Enter <em>${run.outputs.answer}</em> for the <strong>answer</strong> field.</li><li>Click on the Data Source textbox and enter <em>${data.question}</em> for the <strong>question</strong> field. </li><li>Enter <em>${run.outputs.context}</em> for the <strong>documents</strong>field.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/pf-rag-eval-input-efd911a0d3c894ebb742938f31d0e43b.png" width="1383" height="440" class="img_ev3q"></p><ol start="19"><li><p>On the right-hand side of the page, scroll down to the bottom of the page.</p></li><li><p>Select your AzureOpenAI connection name for the <strong>Connection</strong> fields.</p></li><li><p>The <strong>Deployment name / Model</strong> should automatically population the your AzureOpenAI deployment name.</p><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/evaluate-connection-9b5fae9aa674bd383e1a47a47613052a.png" width="973" height="441" class="img_ev3q"></p></li><li><p>Click the <strong>Next</strong> button. </p></li><li><p>Finally, click on the <strong>Submit</strong> button.</p></li><li><p>To monitor the run progress, click on the <strong>Prompt flow</strong> navigation option.  Then click on the <strong>Runs</strong> tab</p></li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/start-evaluate-61f66a3b2560fe8d78e923720a0dd77b.png" width="1242" height="440" class="img_ev3q"></p><ol start="23"><li>Click the Refresh button to update the run status. The run should take ~15 minutes.</li><li>Click on the radio button for the QnA RAG Evaluation, the press the <strong>Visualize outputs</strong> to view the results.</li></ol><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/pf-visualize-output-717ae69e97e745bca3761eaa741b51b7.png" width="1242" height="423" class="img_ev3q"></p><ol start="25"><li><p>The <strong>Runs &amp; metrics</strong> section shows a summary score for gpt_groundedness, gpt_retrieval_score, and gpt_relevance.  The <strong>Outputs</strong> section shows the detailed results for each of the 3 metrics.</p><p><img loading="lazy" src="/rai-dashboard-workshop/assets/images/evaluate-results-9ea135abf486f1a6ce3ea3eba2301302.png" width="1815" height="842" class="img_ev3q"></p></li><li><p>The score will range from 1 to 5, where 1 is the worst and 5 is the best performance.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>In this lab, we learned that while building generate AI solution, it is important to apply responsible AI principles. We learn that even when an AI app provides the correct answer, it is important to validate that the answer is grounded to the context it&#x27;s data source.  Even when the answer is grounded, it is important to validate that the answer is relevant to the question.  Finally, it is important to validate that the answer is similar to the answer provided by the data source.  In the content of Contoso dental clinc, we learn the important of the chatbox giving out information that pertain to their specific clinic.</p><p>Next, we learn how vector index are useful in storing and retrieving custom data, instead of using a pre-trained LLM where the data may be out of date or not relevance to your unique use case.  </p><p>Finally, we learn how vector embedding is useful in converting text to numeric representation. This makes if useful in storing data base on thier relationship distance and similarity.  Search is quicker and more accurate when using vector embedding.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rai-dashboard-workshop/docs/run-custom-chatbot"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab# 6: Run custom chatbot</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/rai-dashboard-workshop/docs/stop-compute"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">7. Shutdown</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#import-chatbot-flow-from-local-to-cloud" class="table-of-contents__link toc-highlight">import chatbot flow from local to cloud</a></li><li><a href="#create-connection-to-azureopenai" class="table-of-contents__link toc-highlight">Create connection to AzureOpenAI</a></li><li><a href="#add-azureopenai-connection-to-chatbot-flow" class="table-of-contents__link toc-highlight">Add AzureOpenAI connection to chatbot flow</a></li><li><a href="#evaluate-chatbot-flow" class="table-of-contents__link toc-highlight">Evaluate chatbot flow</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/rai-dashboard-workshop/docs/welcome">Training</a><span class="footer__link-separator">·</span><a href="https://learn.microsoft.com/ai/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AI Hub</a><span class="footer__link-separator">·</span><a href="https://twitter.com/azureadvocates" target="_blank" rel="noopener noreferrer" class="footer__link-item">@AzureAdvocates</a><span class="footer__link-separator">·</span><a href="https://privacy.microsoft.com/privacystatement" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Statement </a><span class="footer__link-separator">·</span><a href="https://microsoft.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">© 2023 Microsoft</a></div></div></div></footer></div>
<script src="/rai-dashboard-workshop/assets/js/runtime~main.58485783.js"></script>
<script src="/rai-dashboard-workshop/assets/js/main.fac05ae2.js"></script>
</body>
</html>