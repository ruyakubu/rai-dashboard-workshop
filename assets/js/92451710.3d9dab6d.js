"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[856],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var o=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,r=function(e,t){if(null==e)return{};var a,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=o.createContext({}),h=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},c=function(e){var t=h(e.components);return o.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=h(a),m=r,u=d["".concat(l,".").concat(m)]||d[m]||p[m]||i;return a?o.createElement(u,n(n({ref:t},c),{},{components:a})):o.createElement(u,n({ref:t},c))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,n=new Array(i);n[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,n[1]=s;for(var h=2;h<i;h++)n[h]=a[h];return o.createElement.apply(null,n)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7363:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>h});var o=a(7462),r=(a(7294),a(3905));const i={title:"Analyze dataset cohort",sidebar_position:1,slug:"/analyze-dataset-cohort"},n="Model Overview",s={unversionedId:"lab2-model-overview/analyze-dataset-cohort",id:"lab2-model-overview/analyze-dataset-cohort",title:"Analyze dataset cohort",description:"Part of evaluating the performance of a machine learning model is getting a wholistic understanding of its behavior.  This sometimes involves doing comparative analysis helps shed light on how the model is performing with one subgroup of the dataset vs another.   In some case feature-based analysis is necessary to isolate the data and pinpoint the root cause of some of the errors.",source:"@site/docs/lab2-model-overview/analyze-dataset-cohort.md",sourceDirName:"lab2-model-overview",slug:"/analyze-dataset-cohort",permalink:"/rai-dashboard-workshop/docs/analyze-dataset-cohort",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Analyze dataset cohort",sidebar_position:1,slug:"/analyze-dataset-cohort"},sidebar:"mySidebar",previous:{title:"Find model errors",permalink:"/rai-dashboard-workshop/docs/find-treemap-errors"},next:{title:"Analyze feature cohorts",permalink:"/rai-dashboard-workshop/docs/analyze-feature-cohort"}},l={},h=[{value:"Review and compare model performance metric table",id:"review-and-compare-model-performance-metric-table",level:2},{value:"Examine the Probability distribution chart",id:"examine-the-probability-distribution-chart",level:2},{value:"Review the Metric visualization chart",id:"review-the-metric-visualization-chart",level:2},{value:"Look at the Confusion Matrix",id:"look-at-the-confusion-matrix",level:2}],c={toc:h},d="wrapper";function p(e){let{components:t,...i}=e;return(0,r.kt)(d,(0,o.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"model-overview"},"Model Overview"),(0,r.kt)("p",null,"Part of evaluating the performance of a machine learning model is getting a wholistic understanding of its behavior.  This sometimes involves doing comparative analysis helps shed light on how the model is performing with one subgroup of the dataset vs another.   In some case feature-based analysis is necessary to isolate the data and pinpoint the root cause of some of the errors."),(0,r.kt)("p",null,"In this lab we will explore how to use the Model Overview section of the Azure Responsible AI (RAI) dashboard. We will use the cohorts created from the Error Analysis lab to investigate why the model\u2019s behavior is better in one cohort vs another cohort."),(0,r.kt)("h2",{id:"review-and-compare-model-performance-metric-table"},"Review and compare model performance metric table"),(0,r.kt)("p",null,"In the previous lab, you used the Error Analysis tool of the RAI dashboard to discover cohorts where the model had the highest error rates as well as cohort with the lowest errors. Now, you are going to investigate why the model\u2019s behavior is better in one cohort vs another cohort using the Model Overview."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset cohort metrics",src:a(8553).Z,title:"Dataset cohort metrics",width:"2159",height:"1149"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Under Model Overview, select the \u201cDataset Cohorts\u201d pane. This displays the different cohorts created in a table with the model metrics.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Compare the cohort with the most errors ",(0,r.kt)("strong",{parentName:"p"},"\u201cErr: Prior_Inpatient > 0; Num_Meds > 11 and \u2264 21.50\u201d")," verse the least errors ",(0,r.kt)("strong",{parentName:"p"},"\u201cPrior_inpatient = 0; num_diagnose \u2264 6.50; lab_procedures < 56.50\u201d"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Hover the mouse over the box plot line on the chart to see the measurement details.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Observe that the accuracy score for the erroneous cohort is 0.66, which is bad. The False Positive rate is very low; meaning the model is not performing well predicting patients that are going to be Readmitted back to the hospital in 30 days. "),(0,r.kt)("p",{parentName:"li"},"Contrarily, the False Negative rate of 0.754 is high. Meaning, a majority of patients that the model is predicting has a high rate of predicting patients that will not be readmitted as readmitted in 30 days back to the hospital.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next, look at the metrics for the cohort with the least errors has an accuracy score of 0.94, which is far better than the overall accuracy score of the model with all the data. However, this cohort also has a low  False positive rate at 0."))),(0,r.kt)("h2",{id:"examine-the-probability-distribution-chart"},"Examine the Probability distribution chart"),(0,r.kt)("p",null,"The Probability distribution chart shows the model\u2019s probability predicting if patients in the cohorts  will be Readmitted or Not readmitted back to the hospital within 30 days."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset cohort metrics",src:a(6956).Z,title:"Dataset cohort metrics",width:"800",height:"245"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Compare the probability of the patients not being readmitted for all 3 cohorts."),(0,r.kt)("li",{parentName:"ol"},"You'll see that the \u201cAll data\u201d cohort with all the patients test dataset, show that a majority of the patients will not be readmitted back in the hospital within 30 days, with a median probability of patients not readmitted at 0.854 and upper quartile at 0.986, which is good. We would not want a high frequency of patients being readmitted back to a hospital in a few days after being discharged."),(0,r.kt)("li",{parentName:"ol"},"Next, the cohort with the highest error rate:  ",(0,r.kt)("strong",{parentName:"li"},(0,r.kt)("em",{parentName:"strong"},"Err: Prior_Inpatient >0; Num_meds >11.50 & <= 21.50")),", shows a slightly lower probability at 0.89 and a median of 0.719. "),(0,r.kt)("li",{parentName:"ol"},"Lastly, the cohort with the least error rate: ",(0,r.kt)("em",{parentName:"li"},"Prior_Inpatient = 0"),"; ",(0,r.kt)("em",{parentName:"li"},"num_diagnoses <= 6.50"),"; ",(0,r.kt)("em",{parentName:"li"},"lab_procedures <= 56.50"),",  show a probability of patients not readmitted has a median of 0.90 and upper quartile of 0.986. "),(0,r.kt)("li",{parentName:"ol"},'To change the chart to show the probability of patients being Readmitted for the 3 cohorts, click on the "Choose Label" button on the x-axis.')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset y-axis readmitted",src:a(8228).Z,title:"Dataset cohort Y-axis Readmitted",width:"800",height:"424"})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},'Select the "Probability:  Readmitted" radio button. On the pop-up window pane.'),(0,r.kt)("li",{parentName:"ol"},"Then click on the ",(0,r.kt)("strong",{parentName:"li"},'"Apply"')," button."),(0,r.kt)("li",{parentName:"ol"},"Compare the probability of patients being Readmitted for the 3 cohorts")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset cohort metrics",src:a(302).Z,title:"Dataset cohort metrics",width:"2134",height:"774"})),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},"You see that the 3 cohort have a probability of being readmitted less than 0.55.  The cohort will the least number of model errors has the lowest probability of 0.179.  The cohort with the most errors has the highest probability at 0.543.")),(0,r.kt)("h2",{id:"review-the-metric-visualization-chart"},"Review the Metric visualization chart"),(0,r.kt)("p",null,"Now let's get a deeper understanding of the model's performance by switching to the Metric visualizations pane. Since you've already reviewed the accuracy score under the \"Dataset Cohort\" above, you'll explore what the other metrics can reveal about the 3 cohorts."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on the Metric visualizations tab.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'To choose another metric, click on the "Choose Label" on the x-axis to choose "Precision score" from the list of other available metrics.  Then click on the ',(0,r.kt)("strong",{parentName:"p"},'"Apply"')," button.\n",(0,r.kt)("strong",{parentName:"p"},"Note"),":  Since the trained model is a classification problem, the RAI dashboard will display only classification metrics."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset cohort precision metrics",src:a(6248).Z,title:"Dataset cohort precision metrics",width:"2844",height:"1708"})),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"From reviewing the chart, you will see that the model performance for all test data cohort and erroneous cohort is correct at ~70% of the time. The Precision score rate for the least erroneous cohort is 0.94 for patients with no prior hospitalization and the number of diagnoses is less than 7. This is consistent with the accuracy score.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Finally,  change the metric to \"Recall\" to see how well the model was able to correctly predict that the patients in the cohorts will be readmitted back in the hospital in 30 days. The recall shows that the model's prediction was correct less than 25% of the time for all the cohorts for patients being readmitted. This reveals that the model's predictions are not correct a majority of the time when trying to predict patients that will be readmitted within 30 days."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset cohort recall metrics",src:a(8100).Z,title:"Dataset cohort recall metrics",width:"2195",height:"759"})),(0,r.kt)("h2",{id:"look-at-the-confusion-matrix"},"Look at the Confusion Matrix"),(0,r.kt)("p",null,"The Confusion Matrix is helpful to check the rate of the model correctly making the right prediction. This will reveal how well the model is learning for cases where the patient is Readmitted back in the hospital within 30 days vs Not Readmitted."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},'Click on the "Confusion matrix" tab.')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"dataset confusion matrix",src:a(8336).Z,title:"Dataset confusion matrix",width:"3000",height:"2000"})),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},'You will observe that the model is performing better with patient that are "Not Readmitted" compare to "Readmitted".  The number of False Negative should be less that True Negative.  This mean out of all the patient data, the model was only able to predict 24 patients correctly to be Readmitted back to the hospital in < 30 days.')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The number of True Positive (TP) is:  802"),(0,r.kt)("li",{parentName:"ul"},"The number of False Negative (FN) is: 159"),(0,r.kt)("li",{parentName:"ul"},"The number of False Positive (FP) is: 9"),(0,r.kt)("li",{parentName:"ul"},"The number of True Negative (TN) is: 24")),(0,r.kt)("hr",null),(0,r.kt)("p",null,"DISCLAIMER:  Microsoft products and services (1) are not designed, intended or made available as a medical device, and (2) are not designed or intended to be a substitute for professional medical advice, diagnosis, treatment, or judgment and should not be used to replace or as a substitute for professional medical advice, diagnosis, treatment, or judgment. Customers/partners are responsible for ensuring their solutions comply with applicable laws and regulations. Customers/partners also will need to thoroughly test and evaluate whether an AI tool is fit for purpose and identify and mitigate any risks or harms to end users associated with its use."))}p.isMDXComponent=!0},8553:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-dataset-cohort-metrics-1e773fe87d5c9317350131c17000b650.png"},8336:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-dataset-confusion-matrix-80fb705028052a6a62a4226f9352d123.png"},302:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-dataset-probab-distrib-readmit-e2abdf4ddc1e093a7fdee4aab49609ea.png"},6956:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-dataset-probability-distrib-4be2b042477bc75b595780c9e9cc5b98.png"},8100:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-dataset-recall-209fe281e67d24fa3a6b2968e66bce35.png"},8228:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-dataset-y-reamitted-a823200df09bf3d043e558f394308354.png"},6248:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/4-select-dataset-precision-f0f74c79ec30fe5f2187cd3cdca84c0f.png"}}]);