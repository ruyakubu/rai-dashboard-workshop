"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[123],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(a),h=o,d=u["".concat(s,".").concat(h)]||u[h]||m[h]||r;return a?n.createElement(d,l(l({ref:t},c),{},{components:a})):n.createElement(d,l({ref:t},c))}));function d(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:o,l[1]=i;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},5461:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var n=a(7462),o=(a(7294),a(3905));const r={id:"pf-evaluate-chatbot-lab7'",title:"Lab# 7: Evaluate chatbot",sidebar_position:4,slug:"/evaluate-chatbot"},l=void 0,i={unversionedId:"azure-prompt-flow/lab7-evaluate chatbot/pf-evaluate-chatbot-lab7'",id:"azure-prompt-flow/lab7-evaluate chatbot/pf-evaluate-chatbot-lab7'",title:"Lab# 7: Evaluate chatbot",description:"You can unit test your Flow.  However, Prompt flow provides a gallery of sample evaluation flows your can use to test you Flow in bulk. For example, classification accuracy, QnA Groundedness, QnA Relevant, QnA Similarity, QnA F1 Score etc.  This enables you to test how well your LLM is performing.  In addition, you have the ability to examine which of your variant prompts are performing better.  In this example, we\u2019ll use the QnA Groundedness evaluation template to test our flow.",source:"@site/docs/azure-prompt-flow/lab7-evaluate chatbot/lab7-evaluate-chatbot.md",sourceDirName:"azure-prompt-flow/lab7-evaluate chatbot",slug:"/evaluate-chatbot",permalink:"/rai-dashboard-workshop/docs/evaluate-chatbot",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"pf-evaluate-chatbot-lab7'",title:"Lab# 7: Evaluate chatbot",sidebar_position:4,slug:"/evaluate-chatbot"},sidebar:"mySidebar",previous:{title:"Lab# 6: Run custom chatbot",permalink:"/rai-dashboard-workshop/docs/run-custom-chatbot"},next:{title:"7. Shutdown",permalink:"/rai-dashboard-workshop/docs/stop-compute"}},s={},p=[],c={toc:p},u="wrapper";function m(e){let{components:t,...r}=e;return(0,o.kt)(u,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"You can unit test your Flow.  However, Prompt flow provides a gallery of sample evaluation flows your can use to test you Flow in bulk. For example, classification accuracy, QnA Groundedness, QnA Relevant, QnA Similarity, QnA F1 Score etc.  This enables you to test how well your LLM is performing.  In addition, you have the ability to examine which of your variant prompts are performing better.  In this example, we\u2019ll use the QnA Groundedness evaluation template to test our flow."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},"Evaluate")," on the top right-side of the screen.")),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(8478).Z,width:"975",height:"101"})),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"On the Basic settings page, select the ",(0,o.kt)("strong",{parentName:"li"},"Use default variant for all nodes")," radio button."),(0,o.kt)("li",{parentName:"ol"},"Click the ",(0,o.kt)("strong",{parentName:"li"},"Next")," button"),(0,o.kt)("li",{parentName:"ol"},"On the Batch run settings page, click on ",(0,o.kt)("strong",{parentName:"li"},"Add new data")," link for the ",(0,o.kt)("strong",{parentName:"li"},"Data")," field."),(0,o.kt)("li",{parentName:"ol"},"Enter ",(0,o.kt)("strong",{parentName:"li"},"Name")," on the Add new data pane (e.g. Contoso-Dental)"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Browse")," to the workshop repo directory and select the ",(0,o.kt)("strong",{parentName:"li"},"contoso-dental.csv")," file.   "),(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},"Add")," button.   A preview of the top 5 rows of the data should be displayed at the bottom of the page."),(0,o.kt)("li",{parentName:"ol"},"Under Input mapping, enter the open and close brackets ",(0,o.kt)("strong",{parentName:"li"},"[]")," for the value of ",(0,o.kt)("strong",{parentName:"li"},"chat_history"),"."),(0,o.kt)("li",{parentName:"ol"},"Click in the Value textbox for the ",(0,o.kt)("strong",{parentName:"li"},"question")," field and enter ${data.question}.")),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(2382).Z,width:"975",height:"523"})),(0,o.kt)("ol",{start:10},(0,o.kt)("li",{parentName:"ol"},"Click the ",(0,o.kt)("strong",{parentName:"li"},"Next")," button."),(0,o.kt)("li",{parentName:"ol"},"On the ",(0,o.kt)("strong",{parentName:"li"},"Select evaluation")," page, select the checkbox for the ",(0,o.kt)("strong",{parentName:"li"},"QnA Groundedness Evaluation"),".")),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(8886).Z,width:"975",height:"441"})),(0,o.kt)("ol",{start:12},(0,o.kt)("li",{parentName:"ol"},"Click the ",(0,o.kt)("strong",{parentName:"li"},"Next")," button."),(0,o.kt)("li",{parentName:"ol"},"Click on the right arrow ",(0,o.kt)("strong",{parentName:"li"},"\u201c>\u201d")," to expand the ",(0,o.kt)("strong",{parentName:"li"},"QnA Groundedness Evaluation")," settings.")),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(8480).Z,width:"975",height:"456"})),(0,o.kt)("ol",{start:14},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the Data Source textbox and enter ${data.question} for the question field. ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter ${run.inputs.contexts} for the context field.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter ${run.outputs.answer} for the answer field.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"On the right-hand side of the page, scroll down to the bottom of the page.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select your AzureOpenAI connection name for the Connection.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"}," For Deployment name / Model, select your AzureOpenAI deployment name."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{src:a(4430).Z,width:"975",height:"201"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the Next button. ")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Finally, click on the Submit button.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on View run list to monitor the run progress."))),(0,o.kt)("p",null,(0,o.kt)("img",{src:a(8362).Z,width:"975",height:"101"})),(0,o.kt)("ol",{start:23},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the Refresh button to update the run status. The run should take ~15 minutes.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the Display name of the run to view the run results.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on View outputs.  Then select the run name from the Append related results option.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The results will include a column for gpt_groundedness score."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("img",{src:a(831).Z,width:"975",height:"411"}))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The score will range from 1 to 5, where 1 is the worst and 5 is the best performance."))))}m.isMDXComponent=!0},4430:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/evaluate-connection-91aebfe0a651604e4e096bd74c02d122.png"},2382:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/evaluate-input-flow-1308009d35933c4050b93212a44d7446.png"},8480:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/evaluate-qna-fields-cb1170858c26305ea944cc434a6f9625.png"},831:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/evaluate-results-60aeef7991dd30fd93572768d0339366.png"},8478:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/evaluate-aede03a9caf52891e4663a930f336b76.png"},8886:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/evaluation-gallery-a17c8e9ba9f33109a6edd91a9f013d27.png"},8362:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/start-evaluate-df02a6580f06afdde082e1cc2bbe3b91.png"}}]);